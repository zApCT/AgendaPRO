{% extends 'base.html' %}
{% block content %}
<h1>{{ client.name }}</h1>

<div class="panel">
  <div><strong>Email:</strong> {{ client.email or '—' }}</div>
  <div><strong>Telefono:</strong> {{ client.phone or '—' }}</div>
  <div><strong>Note:</strong> {{ client.notes or '—' }}</div>
  <div class="actions">
    <a class="btn" href="{{ url_for('clients_edit', client_id=client.id) }}">Modifica cliente</a>
    <a class="btn ghost" href="{{ url_for('appt_new') }}">+ Nuovo appuntamento</a>
  </div>
</div>

<h2>Appuntamenti</h2>
<div class="list">
  {% for ap in appts %}
  <div class="list-item">
    <div>
      <div class="title">{{ ap.title }}</div>
      <div class="subtitle">{{ ap.start_at.strftime('%d/%m/%Y %H:%M') }} – {{ ap.end_at.strftime('%H:%M') }}{% if ap.location %} • {{ ap.location }}{% endif %}</div>
    </div>
    <div class="actions">
      <a class="btn tiny ghost" href="{{ url_for('appt_edit', appt_id=ap.id) }}">Modifica</a>
      <form action="{{ url_for('appt_delete', appt_id=ap.id) }}" method="post" onsubmit="return confirm('Eliminare appuntamento?');">
        <button class="btn tiny danger" type="submit">Elimina</button>
      </form>
    </div>
  </div>
  {% else %}
  <div class="empty">Ancora nessun appuntamento.</div>
  {% endfor %}
</div>
{% endblock %}
