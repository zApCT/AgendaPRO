{% extends 'base.html' %}
{% block content %}
<h1>Clienti</h1>

<form class="searchbar" method="get">
  <input type="text" name="q" value="{{ q }}" placeholder="Cerca per nome, email o telefono…">
  <button class="btn" type="submit">Cerca</button>
  <a class="btn ghost" href="{{ url_for('clients_new') }}">+ Nuovo cliente</a>
</form>

<div class="table">
  <div class="thead">
    <div>Nome</div><div>Email</div><div>Telefono</div><div></div>
  </div>
  {% for c in clients %}
  <div class="trow">
    <div>{{ c.name }}</div>
    <div>{{ c.email or '—' }}</div>
    <div>{{ c.phone or '—' }}</div>
    <div class="actions">
      <a class="btn tiny ghost" href="{{ url_for('clients_detail', client_id=c.id) }}">Apri</a>
      <a class="btn tiny" href="{{ url_for('clients_edit', client_id=c.id) }}">Modifica</a>
      <form action="{{ url_for('clients_delete', client_id=c.id) }}" method="post" onsubmit="return confirm('Eliminare cliente e appuntamenti correlati?');">
        <button class="btn tiny danger" type="submit">Elimina</button>
      </form>
    </div>
  </div>
  {% else %}
  <div class="empty">Nessun cliente trovato.</div>
  {% endfor %}
</div>
{% endblock %}
