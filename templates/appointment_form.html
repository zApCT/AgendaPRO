{% extends 'base.html' %}
{% block content %}
<h1>{{ 'Modifica appuntamento' if appt else 'Nuovo appuntamento' }}</h1>

<form class="form" method="post">
  <label>Titolo*
    <input type="text" name="title" value="{{ appt.title if appt else '' }}" required>
  </label>
  <div class="grid2">
    <label>Data*
      <input type="date" name="date" value="{{ appt.start_at.strftime('%d-%m-%Y') if appt else '' }}" required>
    </label>
    <label>Inizio*
      <input type="time" name="start_time" value="{{ appt.start_at.strftime('%H:%M') if appt else '' }}" required>
    </label>
    <label>Fine*
      <input type="time" name="end_time" value="{{ appt.end_at.strftime('%H:%M') if appt else '' }}" required>
    </label>
    <label>Cliente (opzionale)
      <select name="client_id">
        <option value="">— Nessuno —</option>
        {% for c in clients %}
          <option value="{{ c.id }}" {% if appt and appt.client_id==c.id %}selected{% endif %}>{{ c.name }}</option>
        {% endfor %}
      </select>
    </label>
  </div>
  <label>Luogo
    <input type="text" name="location" value="{{ appt.location if appt else '' }}">
  </label>
  <label>Note
    <textarea name="notes" rows="4">{{ appt.notes if appt else '' }}</textarea>
  </label>
  <div class="actions">
    <button class="btn" type="submit">Salva</button>
    <a class="btn ghost" href="{{ url_for('calendar') }}">Annulla</a>
  </div>
</form>
{% endblock %}
